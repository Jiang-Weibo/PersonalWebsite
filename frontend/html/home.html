<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</style>
{% load static %}
<script type="text/javascript" src = "{% static 'jQuery/jquery-1.12.4.js' %}"></script>
<script type = "text/javascript" src = "{% static 'bootstrap-3.4.1-dist/js/bootstrap.min.js' %}"></script>
<link rel="stylesheet" href="{% static 'bootstrap-3.4.1-dist/css/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'bootstrap-3.4.1-dist/css/bootstrap-theme.min.css' %}">
<title>蒋伟博的个人网站~</title>
</head>
<body>
	<div class="container">


		{# 巨幕 #}
		<div class="row">
			<div class="col-lg-12">
				<div class="jumbotron" style="background-image:url({% static "/images/doraemon.jpg" %});background-repeat: no-repeat;background-size: cover;background-position: 0% 25%;">
					<h1 class="text-center">Hello, world!</h1>
					<p class="text-center">欢迎登陆或注册~</p>
					<p><a class="btn btn-primary btn-lg" href="#" role="button" style="background-image:linear-gradient(to bottom,#3bb844 0,#3047a0bf 100%)" data-toggle="modal" data-target="#loginModal">登录</a></p>
					<p><a class="btn btn-primary btn-lg" href="#" role="button" style="background-image:linear-gradient(to bottom,#3bb844 0,#3047a0bf 100%)" data-toggle="modal" data-target="#registerModal">注册</a></p>
				</div>
			</div>
		</div>


		{# 轮播图 #}
		<div class="row">
			<div class="col-lg-12">
				<div id="myCarousel" class="carousel slide">
					<!-- 轮播（Carousel）指标 -->
					<ol class="carousel-indicators">
						<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
						<li data-target="#myCarousel" data-slide-to="1"></li>
						<li data-target="#myCarousel" data-slide-to="2"></li>
					</ol>   
					<!-- 轮播（Carousel）项目 -->
					<div class="carousel-inner">
						<div class="item active">
							<img src="{% static '/images/PROMARE2.jpg' %}" height="255" width="400" alt="First slide">
							<div class="carousel-caption ">
								<h3 class="text-info">普罗米亚绝赞上映中！</h3>
							</div>
						</div>
						<div class="item">
							<img src="{% static "/images/YOURNAME1.jpg" %}" height="255" width="400" alt="Second slide">
							<div class="carousel-caption">
								<h3 class="text-info">思念者与被思念者之间的距离。</h3>
							</div>
						</div>
						<div class="item">
							<img src="{% static "/images/SUMMERWARS1.jpg" %}" height="255" width="400" alt="Third slide">
							<div class="carousel-caption">
								<h3 class="text-info">夏日，家族，西瓜与烟花。</h3>
							</div>
						</div>
					</div>
					<!-- 轮播（Carousel）导航 -->
					<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
						<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
						<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div> 
			</div>
		</div>


		{# 模态框登录 #}
		<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="login" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">欢迎登录~</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="login_user_name">用户名</label>
							<input type="text" class="form-control" placeholder="请输入用户名" id="login_user_name" name="user_name">
						</div>
						<div class="form-group">
							<label for="login_user_password">密码</label>
							<input type="password" class="form-control" placeholder="请输入密码" id="login_user_password" name="user_password">
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
						<button type="button" class="btn btn-primary" id="login_btn">登录</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal -->
		</div>


		{# 模态框注册 #}
		<div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="register" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title">欢迎注册~</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="user_name">用户名</label>
							<input type="text" class="form-control" name="user_name" placeholder="请输入用户名" id="register_user_name"> 
						</div>
						<div class="form-group">
							<label for="user_password">密码</label>
							<input type="password" class="form-control" name="user_password" placeholder="请输入密码" id="register_user_password"> 
						</div>
						<div class="form-group">
							<label for="user_password2">请再次输入密码</label>
							<input type="password" class="form-control" name="user_password2" placeholder="请输入密码" id="register_user_password2"> 
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
						<button type="button" class="btn btn-primary" id="register_btn">注册</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal -->
		</div>
	</div>

	<script>
	$('#login_btn').click(function(event) {
		if($('#login_user_name').val()=='' || $('#login_user_password').val()==''){
			alert("用户名和密码不能为空！");
			return false;
		}
		$.ajax({
			url: '/home/loginCheck',
			type: 'POST',
			dataType: 'json',
			data: {'user_name': $('#login_user_name').val(),
					'user_password': $('#login_user_password').val()
				},
			success: function(data){
				if(data['response']=='NO'){
					alert("账号或密码错误！");
				}else{
					 window.location.href = data['response'];
				}
			},
			error: function(){
				console.log("登录发送失败！");
			}
		});
	});
	$('#register_btn').click(function(event) {
		if($('#register_user_name').val()==''){
			alert("用户名不能为空！");
			return false;
		}else if($('#register_user_password').val()==''){
			alert("密码不能为空！");
			return false;
		}else if($('#register_user_password').val() != $('#register_user_password2').val()){
			alert("两次密码输入不一致！");
			return false;
		}
		$.ajax({
			url: '/home/registerCheck',
			type: 'POST',
			dataType: 'json',
			data: {'user_name': $('#register_user_name').val(),
				'user_password': $('#register_user_password').val()
			},
			success:function(data){
				if(data['code']==-1){
					alert("用户名已经存在！");
				}else if(data['code']==1){
					window.location.href = data['url']
				}else{
					alert("未知错误！");
				}
			},
			error:function(){
				console.log("注册发送失败！");
			}
		});
		
	});
	</script>
</body>
</html>